!function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b(exports):'function'==typeof define&&define.amd?define(['exports'],b):b(a.safe=a.safe||{})}(this,function(a){'use strict';function b(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function c(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var e=this,f='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},g='undefined',h='object',i='function',j=('undefined'==typeof self?'undefined':f(self))===h&&self.self===self&&self||('undefined'==typeof global?'undefined':f(global))===h&&global.global===global&&global||this,k=j?j.safe:void 0,m=Object.keys,l=Array.isArray,n=Infinity,o=Object.prototype.hasOwnProperty,p='Callback was already called.',q=['Array or Object are required','Array is required','Exactly two arguments are required','Function is required'],r=function(a){if(null===a)return!1;var b='undefined'==typeof a?'undefined':f(a);return b===h||b===i},s=function(a){return('undefined'==typeof a?'undefined':f(a))===g},t=function(a){return('undefined'==typeof a?'undefined':f(a))===i},u=function(a){return a&&t(a.then)},v=function(a){if(a)return a.data},w=function(a){return a&&a.constructor&&'AsyncFunction'===a.constructor.name},x=function(a,b){var c=new TypeError(a);if(!t(b)||b===$)throw c;b(c)},y=function(a){var b=-1;return{next:function(){return b++,b<a.length?{value:a[b],key:b,done:!1}:{done:!0}}}},z=function(a){var b=-1,c=a[Symbol.iterator]();return{next:function(){b++;var a=c.next();return a.done?{done:!0}:{value:a.value,key:b,done:!1}}}},A=function(a){var b=m(a),c=b.length,d=-1;return{next:function(){d++;var e=b[d];return d<c?{value:a[e],key:e,done:!1}:{done:!0}}}},B=function(a){return l(a)?y(a):a[('undefined'==typeof Symbol?'undefined':f(Symbol))===i&&Symbol.iterator]?z(a):A(a)},C=function(a,b){a.then(function(a){X(b,null,a)},function(a){X(b,a)})},D=function(a,b,c,d){var e=0,f=!1,g=B(a),h=!1,i=F(d),j=function a(){if(!(f||h))for(;e<b&&!1==h;){var d=g.next();if(d.done){f=!0,0>=e&&i();break}e++,c(d.value,d.key,function(c){e--,c?(h=!0,i(c)):!1==f&&e<b?a():f&&0>=e&&i()})}};j()},E=function(a){return function(b){return b(null,a())}},F=function(a){var b=!1;return function(){if(!(b||null==a))return b=!0,a.apply(void 0,arguments)}},G=function(a){var b=!1;return function(){if(b)throw new Error(p);return b=!0,a.apply(void 0,arguments)}},H=function(a,b,c,d){if(!r(a))return x(q[0],d);var e=[],f=0;D(a,b,function(a,b,d){var g=f++;ea(function(b){return c(a,b)},function(a,b){e[g]=b,d(a)})},function(a){d(a,e)})},I=function(a,b,c,d){if(!r(a))return x(q[0],d);var e={};D(a,b,function(a,b,d){ea(function(d){return c(a,b,d)},function(a,c){e[b]=c,d(a)})},function(a){d(a,e)})},J=function(a,b,c,d){return r(a)?void H(a,b,function(a,b){ea(function(b){return c(a,b)},function(c,d){return c?b(c):void b(c,{key:d,val:a})})},function(a,b){var c={};b.forEach(function(a){o.call(c,a.key)?c[a.key].push(a.val):c[a.key]=[a.val]}),d(a,c)}):x(q[0],d)},K=function(a,b,c,d,e){if(!l(b))return x(q[1],e);var f=[];D(b,c,function(b,c,e){ea(function(a){return d(b,a)},function(d,g){(a&&g||!(a||g))&&f.push({data:b,i:c}),e(d)})},function(a){e(a,f.sort(function(c,a){return c.i-a.i}).map(v))})},L=function(a,b,c,d,e){var f=a;D(b,c,function(b,c,e){ea(function(a){return d(b,a)},function(b){a?(!b&&(f=!1),e(!b)):(b&&(f=!0),e(f))})},function(){return e(f)})},M=function(a,b,c){var d=l(a)?[]:{};D(a,b,function(a,b,c){ea(a,function(a){for(var e=arguments.length,f=Array(1<e?e-1:0),g=1;g<e;g++)f[g-1]=arguments[g];d[b]=f.length?1===f.length?f[0]:f:null,c(a)})},function(a){c(a,d)})},N=function(a,b,c,d){for(var e=parseInt(a),f=Array(e),g=0;g<e;g++)f[g]=g;H(f,b,c,d)},O=function(a,b,c,d){var e;D(a,b,function(a,b,d){ea(function(b){return c(a,b)},function(b){b&&(e=a),d(e||null)})},function(){return d(e)})},P=function(a,b,c,d){return l(a)?void H(a,b,c,function(a,b){var c;d(a,(c=[]).concat.apply(c,b))}):x(q[1],d)},Q=function(a,b,c,d,e){var f=function(){ea(b,ha(e,g))},g=function(b){ea(a,ha(e,function(a){a==c?e(null,b):f()}))};d?g():f()},R=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$,e=arguments[4];if(!l(a))return x(q[1],d);var f=B(a),g=a.length;(function b(h,i){if(h)return void d(h);var j=f.next();j.done?d(null,i):ea(function(b){return c(i,e?j.value:a[g-1-j.key],b)},b)})(null,b)},S=function(a){return function(b){for(var c=function(){for(var c=this,d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=e.pop();D(b,a,function(a,b,d){ea(function(b){return a.apply(c,e.concat(b))},d)},g)},d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return 0===e.length?c:c.apply(this,e)}},T=function(){function a(b,c){d(this,a);var e=parseInt(c);if(!e)throw new TypeError('Concurrency must not be zero');Object.defineProperties(this,{__worker:{enumerable:!1,configurable:!1,writable:!1,value:b},__workers:{enumerable:!1,configurable:!1,writable:!0,value:0},__workersList:{enumerable:!1,configurable:!1,writable:!0,value:[]},__isProcessing:{enumerable:!1,configurable:!1,writable:!0,value:!1},__processingScheduled:{enumerable:!1,configurable:!1,writable:!0,value:!1},tasks:{enumerable:!1,configurable:!1,writable:!1,value:[]},concurrency:{enumerable:!0,configurable:!1,writable:!0,value:e},buffer:{enumerable:!0,configurable:!1,writable:!0,value:e/4},started:{enumerable:!0,configurable:!1,writable:!0,value:!1},paused:{enumerable:!0,configurable:!1,writable:!0,value:!1}})}return a.prototype.__insert=function(a,b,c){var d=this;if(null!=c&&!t(c))throw new TypeError(q[3]);this.started=!0;var e=l(a)?a:[a];if(0===e.length&&this.idle())return X(function(){d.drain()});var f=e.map(function(a){return{data:a,callback:G(c||$)}});if(b){var g;(g=this.tasks).unshift.apply(g,f)}else{var h;(h=this.tasks).push.apply(h,f)}this.__processingScheduled||(this.__processingScheduled=!0,X(function(){d.__processingScheduled=!1,d.__execute()}))},a.prototype.__execute=function(){var a=this;if(!this.__isProcessing){this.__isProcessing=!0;for(var b=function(){var b=a.tasks.shift();a.__workersList.push(b),0===a.tasks.length&&a.empty();var c=b.data;a.__workers++,a.__workers===a.concurrency&&a.saturated(),ea(function(b){return a.__worker(c,b)},function(){a.__workers--;var d=a.__workersList.indexOf(b);0===d?a.__workersList.shift():0<d&&a.__workersList.splice(d,1),b.callback.apply(b,arguments),(0>=arguments.length?void 0:arguments[0])&&a.error(0>=arguments.length?void 0:arguments[0],c),a.__workers<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.__execute()})};!this.paused&&this.__workers<this.concurrency&&this.tasks.length;)b();this.__isProcessing=!1}},a.prototype.remove=function(a){var b=this,c=this.tasks.filter(function(b){return!a(b.data)});this.tasks.length=c.length,c.forEach(function(a,c){b.tasks[c]=a})},a.prototype.push=function(a,b){this.__insert(a,!1,b)},a.prototype.saturated=function(){},a.prototype.unsaturated=function(){},a.prototype.empty=function(){},a.prototype.drain=function(){},a.prototype.error=function(){},a.prototype.kill=function(){delete this.drain,this.tasks.length=0},a.prototype.length=function(){return this.tasks.length},a.prototype.running=function(){return this.__workers},a.prototype.idle=function(){return 0===this.tasks.length+this.__workers},a.prototype.pause=function(){this.paused=!0},a.prototype.resume=function(){var a=this;this.paused&&(this.paused=!1,X(function(){return a.__execute()}))},a.prototype.workersList=function(){return this.__workersList},a}(),U=function(a){function e(c,f){return d(this,e),b(this,a.call(this,c,f,'Priority Queue'))}return c(e,a),e.prototype.push=function(a,b,c){this.__insert(a,b||0,c)},e.prototype.__insert=function(a,b,c){var d=this;if(null!=c&&!t(c))throw new TypeError(q[3]);this.started=!0;var e=l(a)?a:[a];if(0===e.length&&this.idle())return X(function(){d.drain()});var f=e.map(function(a){return{data:a,priority:b,callback:G(c||$)}}),g=this.tasks.length,h=g?this.tasks[0].priority:0,i=g?this.tasks[g-1].priority:0;if(b>h){var j;(j=this.tasks).unshift.apply(j,f)}else{var k;(k=this.tasks).push.apply(k,f)}h>=b&&b<i&&this.tasks.sort(function(c,b){return b.priority-c.priority}),this.__processingScheduled||(this.__processingScheduled=!0,X(function(){d.__processingScheduled=!1,d.__execute()}))},e}(T),V=function(a){function e(c,f){return d(this,e),b(this,a.call(this,c,f,'Queue'))}return c(e,a),e.prototype.unshift=function(a,b){this.__insert(a,!0,b)},e}(T),W=function(a){function e(c,f){d(this,e);var g=b(this,a.call(this,c,1,'Cargo')),h=parseInt(f);if(!h)throw new TypeError('Payload must not be zero');return Object.defineProperties(g,{payload:{enumerable:!0,configurable:!1,writable:!0,value:h}}),g}return c(e,a),e.prototype.__execute=function(){var a=this;if(!this.__isProcessing){this.__isProcessing=!0;for(var b=function(){var b,c=a.tasks.splice(0,a.payload);(b=a.__workersList).push.apply(b,c),0===a.tasks.length&&a.empty();var d=c.map(v);a.__workers++,a.__workers===a.concurrency&&a.saturated(),ea(function(b){return a.__worker(d,b)},function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];a.__workers--,c.forEach(function(b){var c=a.__workersList.indexOf(b);0===c?a.__workersList.shift():0<c&&a.__workersList.splice(c,1),b.callback.apply(b,d)}),a.__workers<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.__execute()})};!this.paused&&this.__workers<this.concurrency&&this.tasks.length;)b();this.__isProcessing=!1}},e}(T),X=function(){return('undefined'==typeof setImmediate?'undefined':f(setImmediate))===g?('undefined'==typeof process?'undefined':f(process))===g?('undefined'==typeof Image?'undefined':f(Image))===i?function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(!t(a))throw new TypeError(q[3]);var e=new Image;e.onerror=function(){a.apply(void 0,c)},e.src='data:image/png,0'}:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(!t(a))throw new TypeError(q[3]);setTimeout.apply(void 0,[a,0].concat(c))}:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(!t(a))throw new TypeError(q[3]);process.nextTick(function(){a.apply(void 0,c)})}:function(){if(!t(0>=arguments.length?void 0:arguments[0]))throw new TypeError(q[3]);setImmediate.apply(void 0,arguments)}}(),Y=function(){return j.safe=k,e},Z=('undefined'==typeof process?'undefined':f(process))!==g&&process.nextTick?process.nextTick:X,$=function(){},_=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return a.apply(void 0,c.concat(d))}},aa=function(){var a=arguments.length,b=parseInt(this);if(b!==b)throw new Error('Pass arguments to "safe.args" only through ".apply" method!');if(0===a||b>a)return[];for(var c=Array(a-b),d=b;d<a;d++)c[d-b]=0>d?null:arguments.length<=d?void 0:arguments[d];return c},ba=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return a.apply(void 0,[null].concat(b))}},ca=function(a){return function(){for(var b=!0,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=d[d.length-1];d[d.length-1]=function(){for(var a=this,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];b?X(function(){return f.apply(a,d)}):f.apply(this,d)};var g=a.apply(this,d);return b=!1,g}},da=function(a){return function(){for(var b=this,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=d.pop();ea(function(c){var e=a.apply(b,d);return w(a)||u(e)?e:c(null,e)},f)}},ea=function(a,b){if(w(a))return void C(a(),b);var c,d,e=!1,f=function(){if(e)throw(0>=arguments.length?void 0:arguments[0])||new Error(c||p);e=!0,b.apply(void 0,arguments)};try{d=a(f)}catch(a){if(!a)throw a;X(f,a)}if(u(d)){if(c='Resolution method is overspecified. Call a callback *or* return a Promise.',e)throw new Error(c);C(d,f)}},fa=function(a,b){if(!t(b)||!t(a))throw new TypeError(q[2]);return function(){var c;try{for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];c=b.apply(this,e)}catch(b){if(!b)throw b;return void a(b)}s(c)?X(a,null):X(a,null,c)}},ga=function(a,b){if(!t(b)||!t(a))throw new TypeError(q[2]);return function(c){if(c)return void a(c);var d;try{for(var e=arguments.length,f=Array(1<e?e-1:0),g=1;g<e;g++)f[g-1]=arguments[g];d=b.apply(this,f)}catch(b){if(!b)throw b;return void X(a,b)}s(d)?X(a,null):X(a,null,d)}},ha=function(a,b){if(s(b)||!t(a))throw new TypeError(q[2]);return function(c){if(c)a(c);else if(!t(b))X(a,null,b);else try{for(var d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b.apply(this,e)}catch(b){if(!b)throw b;X(a,b)}}},ia=function(a,b){if(s(a))throw new TypeError(q[2]);return function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];s(b)&&(b=a,a=d[d.length-1]);try{return b.apply(this,d)}catch(b){if(!b)throw b;X(a,b)}}},ja=function(a,b){if(!t(a)||!t(b))throw new TypeError(q[2]);return function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];d.push(b);try{return a.apply(this,d)}catch(a){if(!a)throw a;X(b,a)}}},ka=function(a,b){if(s(b)||!t(a))throw new TypeError(q[2]);return function(c){if(c)return void a(c);try{return b.apply(this,1>=arguments.length?void 0:arguments[1])}catch(b){if(!b)throw b;X(a,b)}}},la=function(a){return function(b){return a.apply(this,b)}},ma=function(a,b){a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1}})},na=function(a,b){for(var c=arguments.length,d=Array(2<c?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return function(c){try{return a[b].apply(a,d.concat(c))}catch(a){if(!a)throw a;X(c,a)}}},oa=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;if(!l(a))return void x(q[1],c);var d=[];D(a,n,function(a,c,e){ea(function(c){return b(a,c)},function(b,f){d[c]={data:a,i:f},e(b)})},function(a){c(a,d.sort(function(c,a){return c.i-a.i}).map(v))})},pa=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:$;if(!l(a))return void x(q[1],b);var c=B(a);(function a(d){for(var e=arguments.length,f=Array(1<e?e-1:0),g=1;g<e;g++)f[g-1]=arguments[g];if(d)return void b(d);var h=c.next();h.done?b.apply(void 0,[null].concat(f)):ea(function(a){return h.value.apply(h,f.concat([a]))},a)})()},qa=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:$;M(a,1,b)},ra=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:$;M(a,n,b)},sa=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;M(a,b,c)},ta=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;R(a,b,c,d,1)},ua=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;R(a,b,c,d,0)},va=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;return l(a)?void D(a,n,function(a,c,d){ea(function(c){return b(a,c)},d)},c):void x(q[1],c)},wa=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;return l(a)?void D(a,b,function(a,b,d){ea(function(b){return c(a,b)},d)},d):void x(q[1],d)},xa=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;return l(a)?void D(a,1,function(a,c,d){ea(function(c){return b(a,c)},d)},c):void x(q[1],c)},ya=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;return r(a,c)?void D(a,n,function(a,c,d){ea(function(d){return b(a,c,d)},d)},c):void x(q[0],c)},za=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;return r(a)?void D(a,b,function(a,b,d){ea(function(d){return c(a,b,d)},d)},d):void x(q[0],d)},Aa=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;return r(a)?void D(a,1,function(a,c,d){ea(function(d){return b(a,c,d)},d)},c):void x(q[0],c)},Ba=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;H(a,n,b,c)},Ca=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;H(a,b,c,d)},Da=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;H(a,1,b,c)},Ea=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;I(a,n,b,c)},Fa=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;I(a,b,c,d)},Ga=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;I(a,1,b,c)},Ha=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;P(a,n,b,c)},Ia=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;P(a,b,c,d)},Ja=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;P(a,1,b,c)},Ka=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;J(a,n,b,c)},La=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;J(a,b,c,d)},Ma=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;J(a,1,b,c)},Na=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;K(!0,a,n,b,c)},Oa=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;K(!0,a,b,c,d)},Pa=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;K(!0,a,1,b,c)},Qa=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;K(!1,a,n,b,c)},Ra=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;K(!1,a,b,c,d)},Sa=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;K(!1,a,1,b,c)},Ta=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;L(!1,a,n,b,c)},Ua=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;L(!1,a,b,c,d)},Va=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;L(!1,a,1,b,c)},Wa=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;L(!0,a,n,b,c)},Xa=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:$;L(!0,a,b,c,d)},Ya=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;L(!0,a,1,b,c)},Za=function(a,b,c){var d,e={},f=Object.create(null),g=m(a),h=g.length,j=0,k=null;if(t(b)&&(c=b,b=n),g.forEach(function(b){if(!k){var c=a[b];if(l(c))for(var d,e=c.slice(0,c.length-1),f=0;f<e.length;f++){if(d=o.call(a,c[f])?a[c[f]]:null,!d){k=new Error('safe.auto task `'+b+'` has a non-existent dependency `'+c[f]+'` in '+e.join(', '));break}if(d===b||l(d)&&-1!==d.indexOf(b)){k=new Error('safe.auto cannot execute tasks due to a recursive dependency');break}}}}),k){if(t(c))return void c(k);throw new Error(k)}var i=F(c);(function c(){g.forEach(function(g){if(!(d||j>=b||f[g])){var k,m=a[g];if(l(m)){for(var n=m.length-1,p=0;p<n;p++)if(!o.call(e,m[p]))return;k=m[n]}else k=m;f[g]=!0,j++,ea(function(a){return k(a,e)},function(a){for(var b=arguments.length,f=Array(1<b?b-1:0),k=1;k<b;k++)f[k-1]=arguments[k];h--,j--,d||(d=a||0===h,a?i(a,e):(e[g]=f.length?1===f.length?f[0]:f:null,d?i(a,e):c()))})}})})()},$a=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;Q(E(a),b,!1,!0,c)},_a=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;Q(E(b),a,!1,!1,c)},ab=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;Q(a,b,!1,!0,c)},bb=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;Q(b,a,!1,!1,c)},cb=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;Q(E(a),b,!0,!0,c)},db=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:$;Q(E(b),a,!0,!1,c)},eb=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:$,c=G(b),d=ca(a);(function a(){d(ha(c,a))})()},fb=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(a){return a},c={},d={},e=function(){for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=f.pop(),i=b.apply(void 0,f);o.call(c,i)?X(function(){return h.apply(void 0,c[i])}):o.call(d,i)?d[i].push(h):(d[i]=[h],a.apply(void 0,f.concat([function(){for(var a=arguments.length,b=Array(a),e=0;e<a;e++)b[e]=arguments[e];c[i]=b;var f=d[i];delete d[i],f.forEach(function(a){a.apply(void 0,b)})}])))};return e.memo=c,e.unmemoized=a,e},gb=function(a){return function(){return(a.unmemoized||a).apply(void 0,arguments)}},hb=function(a,b,c){if(1>arguments.length||3<arguments.length)throw new Error('Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)');var d,e,f,g=0,h=function(){return g};t(a)?(c=b,b=a,e=5):r(a)?(e=parseInt(a.times)||5,t(a.interval)?h=a.interval:g=parseInt(a.interval)||g,a.errorFilter&&(f=a.errorFilter)):e=parseInt(e)||5;var i=function(a,g){var i=g;D(Array(e),1,function(a,c,g){ea(function(a){return b(a,i)},function(a,b){if(d=a||null,i={err:d,result:b},!(a&&c<e-1))g(!a);else if(f&&!f(a))g(!0);else{var j=h(c+1);0<j?setTimeout(g,j):g()}})},function(){(a||c||$)(d,i)})};return c?i():i},ib=function(a,b,c,d){3>=arguments.length&&(d=c,c=b,b=l(a)?[]:{}),d=F(d),D(a,n,function(a,d,e){ea(function(e){return c(b,a,d,e)},e)},function(a){return d(a,b)})},jb=function(a){return function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=c[c.length-1];c[c.length-1]=function(a){if(a)e(null,{error:a});else{for(var b=void 0,c=arguments.length,d=Array(1<c?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];b=d.length?1===d.length?d[0]:d:null,e(null,{value:b})}};var f=a.apply(this,c);(w(a)||u(f))&&f.then(function(a){X(e,null,{value:a})},function(a){X(e,null,{error:a})})}},kb=function(a){if(l(a))return a.map(jb);var b={};return m(a).forEach(function(c){b[c]=jb(a[c])}),b},lb=function(a,b){if(!l(a))return void x(q[0],b);if(!a.length)b();else{var c=F(b);a.forEach(function(a){a(c)})}},mb=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:$;if(!r(a,b))return void x(q[0],b);var c,d=null;D(a,1,function(a,b,e){ea(a,function(a){for(var b=arguments.length,f=Array(1<b?b-1:0),g=1;g<b;g++)f[g-1]=arguments[g];c=1>=f.length?f[0]:f,d=a,e(!a)})},function(){b(d,c)})},nb=function(a,b){return new V(a,b)},ob=function(a,b){return new U(a,b)},pb=function(a,b){return new W(a,b)},qb=function(a,b,c){N(a,n,b,c)},rb=function(a,b,c,d){N(a,b,c,d)},sb=function(a,b,c){N(a,1,b,c)},tb=function(a,b,c){O(a,n,b,c)},ub=function(a,b,c,d){O(a,b,c,d)},vb=function(a,b,c){O(a,1,b,c)},wb=S(n),xb=S(1);a['default']={noConflict:Y,noop:$,nextTick:Z,back:X,setImmediate:X,yield:X,apply:_,async:na,inherits:ma,args:aa,ensureAsync:ca,constant:ba,result:fa,sure_result:ga,trap_sure_result:ga,sure:ha,trap_sure:ha,sure_spread:ka,spread:la,trap:ia,wrap:ja,run:ea,each:va,forEach:va,eachLimit:wa,forEachLimit:wa,eachSeries:xa,forEachSeries:xa,eachOf:ya,forEachOf:ya,eachOfLimit:za,forEachOfLimit:za,eachOfSeries:Aa,forEachOfSeries:Aa,map:Ba,mapLimit:Ca,mapSeries:Da,groupBy:Ka,groupByLimit:La,groupBySeries:Ma,mapValues:Ea,mapValuesLimit:Fa,mapValuesSeries:Ga,concat:Ha,concatLimit:Ia,concatSeries:Ja,sortBy:oa,filter:Na,select:Na,filterLimit:Oa,selectLimit:Oa,filterSeries:Pa,selectSeries:Pa,reject:Qa,rejectLimit:Ra,rejectSeries:Sa,waterfall:pa,series:qa,parallel:ra,parallelLimit:sa,auto:Za,whilst:$a,doWhilst:_a,during:ab,doDuring:bb,until:cb,doUntil:db,forever:eb,reduce:ta,inject:ta,foldl:ta,reduceRight:ua,foldr:ua,queue:nb,priorityQueue:ob,cargo:pb,retry:hb,retryable:hb,times:qb,timesLimit:rb,timesSeries:sb,detect:tb,detectLimit:ub,detectSeries:vb,some:Ta,any:Ta,someLimit:Ua,anyLimit:Ua,someSeries:Va,anySeries:Va,every:Wa,all:Wa,everyLimit:Xa,allLimit:Xa,everySeries:Ya,allSeries:Ya,applyEach:wb,applyEachSeries:xb,asyncify:da,wrapSync:da,memoize:fb,unmemoize:gb,transform:ib,reflect:jb,reflectAll:kb,race:lb,tryEach:mb},a.noConflict=Y,a.noop=$,a.nextTick=Z,a.back=X,a.setImmediate=X,a.yield=X,a.apply=_,a.async=na,a.inherits=ma,a.args=aa,a.ensureAsync=ca,a.constant=ba,a.result=fa,a.sure_result=ga,a.trap_sure_result=ga,a.sure=ha,a.trap_sure=ha,a.sure_spread=ka,a.spread=la,a.trap=ia,a.wrap=ja,a.run=ea,a.each=va,a.forEach=va,a.eachLimit=wa,a.forEachLimit=wa,a.eachSeries=xa,a.forEachSeries=xa,a.eachOf=ya,a.forEachOf=ya,a.eachOfLimit=za,a.forEachOfLimit=za,a.eachOfSeries=Aa,a.forEachOfSeries=Aa,a.map=Ba,a.mapLimit=Ca,a.mapSeries=Da,a.groupBy=Ka,a.groupByLimit=La,a.groupBySeries=Ma,a.mapValues=Ea,a.mapValuesLimit=Fa,a.mapValuesSeries=Ga,a.concat=Ha,a.concatLimit=Ia,a.concatSeries=Ja,a.sortBy=oa,a.filter=Na,a.select=Na,a.filterLimit=Oa,a.selectLimit=Oa,a.filterSeries=Pa,a.selectSeries=Pa,a.reject=Qa,a.rejectLimit=Ra,a.rejectSeries=Sa,a.waterfall=pa,a.series=qa,a.parallel=ra,a.parallelLimit=sa,a.auto=Za,a.whilst=$a,a.doWhilst=_a,a.during=ab,a.doDuring=bb,a.until=cb,a.doUntil=db,a.forever=eb,a.reduce=ta,a.inject=ta,a.foldl=ta,a.reduceRight=ua,a.foldr=ua,a.queue=nb,a.priorityQueue=ob,a.cargo=pb,a.retry=hb,a.retryable=hb,a.times=qb,a.timesLimit=rb,a.timesSeries=sb,a.detect=tb,a.detectLimit=ub,a.detectSeries=vb,a.some=Ta,a.any=Ta,a.someLimit=Ua,a.anyLimit=Ua,a.someSeries=Va,a.anySeries=Va,a.every=Wa,a.all=Wa,a.everyLimit=Xa,a.allLimit=Xa,a.everySeries=Ya,a.allSeries=Ya,a.applyEach=wb,a.applyEachSeries=xb,a.asyncify=da,a.wrapSync=da,a.memoize=fb,a.unmemoize=gb,a.transform=ib,a.reflect=jb,a.reflectAll=kb,a.race=lb,a.tryEach=mb,Object.defineProperty(a,'__esModule',{value:!0})});
